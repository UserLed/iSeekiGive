<% if @user.perspectives.present? %>
  <% @user.perspectives.where(:anonymous => false).each do |perspective| %>
    <strong>
      <%= perspective.story_type %>
    </strong>
    <p class="story">
      <%= perspective.story %>
    </p>
    <p>
      Keywords: <%= perspective.perspective_tags.collect{|t| t.name}.join(", ") %>
    </p>
    <% unless logged_in? %>
      <%= link_to "Save", "javascript:void",:class => "btn btn-success disabled" %>
    <% else %>
      <% if current_user.saved_perspectives.collect(&:perspective_id).include?(perspective.id) %>
        <%= link_to "Saved", "javascript:void(0)", :class => "btn btn-success disabled" %>
      <% else %>
        <%= link_to "Save", save_perspective_user_path(current_user, :p => perspective.id), :remote => true, :class => "btn btn-success" %>
      <% end %>
    <% end %>
    <hr/>
  <% end %>
 
<% else %>
   <div class="container">
     <span>You have no shared posts and no Saved posts</span>
   </div>
<% end %>


<script type="text/javascript">
  $(function(){
    $(".story").readmore({
      maxheight: 30
    });
  });
</script>