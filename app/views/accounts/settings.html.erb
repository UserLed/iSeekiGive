<div class="page-header">
  <h1>
    Password Change
  </h1>
</div>

    <%= form_for(:user, :url => settings_accounts_path, method: 'POST') do |f| %>

    <div class="control-group">
      <%= f.label :password, :class => 'control-label' %>
      <div class="controls">
        <%= f.password_field :password, :class => 'text_field', :required => true %>
      </div>
    </div>


    <div class="control-group">
      <%= f.label :password_confirmation, :class => 'control-label' %>
      <div class="controls">
        <%= f.password_field :password_confirmation, :class => 'text_field', :required => true, :oninput => "check(this)" %>
      </div>
    </div>


    <div class="form-actions">
      <%= f.submit "Submit", :class => 'btn btn-primary' %>
    </div>
<% end %>


<script type='text/javascript'>
    function check(input) {
        if (input.value != document.getElementById('<%= @user.class.name.downcase %>_password').value) {
            input.setCustomValidity('The two passwords must match.');
        } else {
            // input is valid -- reset the error message
            input.setCustomValidity('');
        }
    }
</script>