<div class="row-fluid">
  <div class="span12">
    <legend>
      Sessions
    </legend>
    <%= link_to "send a message", messages_new_giver_sessions_path(current_user) %>
    <%= link_to "inbox", inbox_giver_sessions_path(current_user) %>
  </div>
</div>

<table border=1>
	<tr>
	<th>Time</th>
	<% %w( mon tue wed thu fri sat sun ).each do |day| %>
		<th><%= day %></th>
	<% end %></tr>
	
	<% [6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9].each_with_index do |row, index| %>
		
		<tr style="border:1px">
			<th>
				<%= row%> 
				<% time_format = (index > 5)? "pm" : "am"   %>
				<%= time_format %>
			</th>
			
			<% %w(mon tue wed thu fri sat sun ).each do |day| %>
				<td style="padding:5px 25px" id = '<%="#{day}_#{row}_#{time_format}" %>'>&nbsp;</td>
		    <% end %>
		</tr>
    <% end %>
</table>
<%= submit_tag "Submit", :class=> 'btn btn-info', :id => "availability_submit"  %>

<script type="text/javascript">
	$(function(){
		var availability = [];
		$('td').on('click', function(){
			var cell_id = this.id;
			if ($("#"+cell_id).hasClass("selected")){
				$("#"+cell_id).removeClass("selected");
				availability =_.without(availability,cell_id);
				console.log(availability);
		}
		else{
			$("#"+cell_id).addClass("selected");
			availability.push(cell_id);
			console.log(availability);
	
		}
				
		});

	$("#availability_submit").on('click',function(){
		$.post('sessions/time_slot_save', {time_slots: availability},function(data){console.log(data);});
	})	
	})
</script>